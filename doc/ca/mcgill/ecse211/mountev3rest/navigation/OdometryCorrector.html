<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_65) on Thu Nov 22 17:01:16 EST 2018 -->
<title>OdometryCorrector</title>
<meta name="date" content="2018-11-22">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="OdometryCorrector";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometerException.html" title="class in ca.mcgill.ecse211.mountev3rest.navigation"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.Direction.html" title="enum in ca.mcgill.ecse211.mountev3rest.navigation"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.html" target="_top">Frames</a></li>
<li><a href="OdometryCorrector.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ca.mcgill.ecse211.mountev3rest.navigation</div>
<h2 title="Class OdometryCorrector" class="title">Class OdometryCorrector</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>ca.mcgill.ecse211.mountev3rest.navigation.OdometryCorrector</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">OdometryCorrector</span>
extends java.lang.Object</pre>
<div class="block">This class used line detection on the lower light sensor of the robot to provide periodic
 corrections to the odometer location estimations and the robot's direction.
 <p>
 This class corrects the trajectory of the robot by ensuring that both light sensors align with
 each line traversed, effectively setting the robot's heading to a right angle. Then it adjusts
 the odometer values by estimating the line that was traversed and using the provided tile size
 measurement.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.Direction.html" title="enum in ca.mcgill.ecse211.mountev3rest.navigation">OdometryCorrector.Direction</a></span></code>
<div class="block">Direction enum used to classify the angle heading of the robot into four groups.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.Direction.html" title="enum in ca.mcgill.ecse211.mountev3rest.navigation">OdometryCorrector.Direction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.html#direction">direction</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.html#OdometryCorrector-EV3LargeRegulatedMotor-EV3LargeRegulatedMotor-double-double-double-">OdometryCorrector</a></span>(EV3LargeRegulatedMotor&nbsp;leftMotor,
                 EV3LargeRegulatedMotor&nbsp;rightMotor,
                 double&nbsp;TILE_SIZE,
                 double&nbsp;SENSOR_OFFSET,
                 double&nbsp;MOTOR_OFFSET)</code>
<div class="block">Creates an <code>OdometryCorrector</code> that can be called during navigation.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.html#adjustTrajectory-int-">adjustTrajectory</a></span>(int&nbsp;laggingSide)</code>
<div class="block">Adjusts the trajectory of the robot by stopping the leading side and waiting until the lagging
 side sees a line.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.html#applyCorrection--">applyCorrection</a></span>()</code>
<div class="block">Applies trajectory and odometry correction by detecting the lines on the floor with the two
 light sensors.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.html#disable--">disable</a></span>()</code>
<div class="block">Disables trajectory and odometry correction using two light sensors.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.html#enable--">enable</a></span>()</code>
<div class="block">Enables trajectory and odometry correction using two light sensors.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.html#estimateCurrentLine--">estimateCurrentLine</a></span>()</code>
<div class="block">Estimates the closest line to the robot according to the odometer's readings and the current
 heading.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.html#isEnabled--">isEnabled</a></span>()</code>
<div class="block">Returns true if trajectory and odometry correction is enabled, and false otherwise.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.html#updateDirection--">updateDirection</a></span>()</code>
<div class="block">Updates the internal direction variable according to the odometer's reading.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="direction">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>direction</h4>
<pre>public&nbsp;<a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.Direction.html" title="enum in ca.mcgill.ecse211.mountev3rest.navigation">OdometryCorrector.Direction</a> direction</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="OdometryCorrector-EV3LargeRegulatedMotor-EV3LargeRegulatedMotor-double-double-double-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>OdometryCorrector</h4>
<pre>public&nbsp;OdometryCorrector(EV3LargeRegulatedMotor&nbsp;leftMotor,
                         EV3LargeRegulatedMotor&nbsp;rightMotor,
                         double&nbsp;TILE_SIZE,
                         double&nbsp;SENSOR_OFFSET,
                         double&nbsp;MOTOR_OFFSET)
                  throws <a href="../../../../../ca/mcgill/ecse211/mountev3rest/sensor/PollerException.html" title="class in ca.mcgill.ecse211.mountev3rest.sensor">PollerException</a>,
                         <a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometerException.html" title="class in ca.mcgill.ecse211.mountev3rest.navigation">OdometerException</a></pre>
<div class="block">Creates an <code>OdometryCorrector</code> that can be called during navigation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>leftMotor</code> - Left motor used to correct the trajectory.</dd>
<dd><code>rightMotor</code> - Right motor used to correct the trajectory.</dd>
<dd><code>TILE_SIZE</code> - Length of the tiles on the grid in centimeters.</dd>
<dd><code>SENSOR_OFFSET</code> - Vertical distance from the robot's axis to the lower light sensors in
        centimeters.</dd>
<dd><code>MOTOR_OFFSET</code> - Ratio between the speed of the left and right motors used to reduce the
        error between the motors' different performances.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../ca/mcgill/ecse211/mountev3rest/sensor/PollerException.html" title="class in ca.mcgill.ecse211.mountev3rest.sensor">PollerException</a></code> - If the <code>LightPoller</code> has not been instantiated.</dd>
<dd><code><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometerException.html" title="class in ca.mcgill.ecse211.mountev3rest.navigation">OdometerException</a></code> - If the <code>Odometer</code> has not been instantiated.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="applyCorrection--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>applyCorrection</h4>
<pre>public&nbsp;boolean&nbsp;applyCorrection()</pre>
<div class="block">Applies trajectory and odometry correction by detecting the lines on the floor with the two
 light sensors. If correction is disabled or the robot just applied correction on this line the
 method returns immediately.
 <p>
 This method actively changes the heading of the robot to be aligned to the line being
 traversed, and overwrites the values of the odometer by estimating the number of line that was
 detected as well as the dierection and the measurement of the tile length provided.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the correction was applied, false otherwise.</dd>
</dl>
</li>
</ul>
<a name="estimateCurrentLine--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>estimateCurrentLine</h4>
<pre>public&nbsp;int&nbsp;estimateCurrentLine()</pre>
<div class="block">Estimates the closest line to the robot according to the odometer's readings and the current
 heading.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An integer indicating the closest line to the robot on the grid according to the
         robot's current heading.</dd>
</dl>
</li>
</ul>
<a name="adjustTrajectory-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>adjustTrajectory</h4>
<pre>public&nbsp;boolean&nbsp;adjustTrajectory(int&nbsp;laggingSide)</pre>
<div class="block">Adjusts the trajectory of the robot by stopping the leading side and waiting until the lagging
 side sees a line. In case the lagging side takes too long to see a line, the rotation caused by
 stopping one of the wheels is reversed and the method returns.
 <p>
 If the method determines that it just corrected using this line it returns false immediately.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>laggingSide</code> - Integer denoting which side is lagging. The encoding is 0 for left and 1 for
        right.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if a correction was actually applied to the odometer, false otherwise.</dd>
</dl>
</li>
</ul>
<a name="updateDirection--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateDirection</h4>
<pre>public&nbsp;void&nbsp;updateDirection()</pre>
<div class="block">Updates the internal direction variable according to the odometer's reading.</div>
</li>
</ul>
<a name="enable--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enable</h4>
<pre>public&nbsp;void&nbsp;enable()</pre>
<div class="block">Enables trajectory and odometry correction using two light sensors.</div>
</li>
</ul>
<a name="disable--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disable</h4>
<pre>public&nbsp;void&nbsp;disable()</pre>
<div class="block">Disables trajectory and odometry correction using two light sensors.</div>
</li>
</ul>
<a name="isEnabled--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isEnabled</h4>
<pre>public&nbsp;boolean&nbsp;isEnabled()</pre>
<div class="block">Returns true if trajectory and odometry correction is enabled, and false otherwise.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A boolean value indicating whether correction is enabled.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometerException.html" title="class in ca.mcgill.ecse211.mountev3rest.navigation"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.Direction.html" title="enum in ca.mcgill.ecse211.mountev3rest.navigation"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?ca/mcgill/ecse211/mountev3rest/navigation/OdometryCorrector.html" target="_top">Frames</a></li>
<li><a href="OdometryCorrector.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
